<?xml version="1.0" encoding="UTF-8"?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
     "http://mybatis.org/dtd/mybatis-3-mapper.dtd">  
 <mapper  namespace="UserSQL">
	<sql id="createTable"> 
	   <!--id自增主键从0开始 -->  
		 <![CDATA[
		     create table test2(
		     id int UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT, 
		     name varchar(100)
		     )
		 ]]>
		 </sql>
		 <sql id="dropTable">
		 <![CDATA[ 
			 drop table test2
		 ]]>
		 </sql>
		 <insert id="insert" parameterType="com.purang.ibatis.UserModel">
		 <![CDATA[
			 insert into test2(name) values(#{name})
		 ]]>
		 <selectKey resultType="int" keyProperty="id" order="AFTER">
			 <!-- 获取hsqldb插入的主键 -->  
      		 call identity();  
      		 <!-- mysql使用select last_insert_id();获取插入的主键 -->  
		 </selectKey>
		 </insert>
		 
		 <select id="countAll" resultType="java.lang.Integer">  
		    <![CDATA[ select count(*) from test2 ]]>     
		</select> 
		
		 <update id="update" parameterType="com.purang.ibatis.UserModel">  
		    <![CDATA[ UPDATE  test2  SET NAME=#{name} WHERE id=#{id} ]]>     
		</update> 
 </mapper>   		 